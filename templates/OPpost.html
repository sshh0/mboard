{% load extra %}
{% load i18n %}
<article class="opPost" id="id{{ thread.pk }}" data-id="{{ thread.pk }}">
  <div class="opPostHeader">
    <span>
      <span class="poster">{{ thread.session.session_key|gen_name_from_cookie }}</span>
      <span class="date" data-unixtime="{{ thread.date|date:"U" }}">{{ thread.date|date:'d/m/Y, H:i:s' }}</span>
      <a class="postLink" href="#id{{ thread.pk }}">â„–:{{ thread.pk }}</a>
    </span>
    <div id="voting" style="display: inline-block">
      {% if request.session.session_key != thread.session.session_key %}
        <span id="rank" style="color: green">Rank: {{ thread.rank }}</span>
        <button id="downvote" type="button" onclick="vote(this, 0)">-</button>
        <button id="upvote" type="button" onclick="vote(this, 1)">+</button>
        <span id="vote" style="color: red">{{ thread.vote }}</span>
      {% endif %}
    </div>
    <a class="threadlink" href="{{ thread.get_absolute_url }}">{% translate 'Reply' context 'into thread' %}</a>
  </div>
  {% if thread.video_thumb %}
    <div class="video-link">
      <a target="_blank" href="{{ thread.video.url }}">{{ thread.video.name|strippath|truncatechars:33 }}</a>
      ({{ thread.video.size|filesizeformat }})
    </div>
    <div class="video-div">
      <a target="_blank" href="{{ thread.video.url }}">
        <img loading="lazy" class="video-thumb" src="{{ thread.video_thumb.url }}" alt="">
      </a>
    </div>
  {% endif %}
  {% if thread.thumbnail %}
    <div class="imglink">
      <a target="_blank" href="{{ thread.image.url }}">{{ thread.image.url|strippath|truncatechars:33 }}</a>
      ({{ thread.image.size|filesizeformat }})
    </div>
    <div class="imagediv">
      <a href="{{ thread.image.url }}">
        <img class="image" src="{{ thread.thumbnail.url }}" alt="">
      </a>
    </div>
  {% endif %}
  <div class="text">{% customize_post_string thread.text thread.pk posts_ids thread.pk %}
    <div class="replies"></div>
  </div>
</article>
